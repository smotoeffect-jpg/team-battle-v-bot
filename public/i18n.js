// ====== Translations (Full Multilingual Map) ======
const i18n = {
  en: {
    // ðŸ General
    israel: "Israel",
    gaza: "Gaza",
    tap: "Tap (+1)",
    superBoost: "Super Boost (+25)",
    switchTeam: "Switch Team",
    extraTap: "Extra Tap",
    myBoard: "My Board",
    stars: "Stars / Extra Tap",
    playerLevel: "Player Level",
    referrals: "Invited Friends",
    tapsToday: "Taps today",
    top20: "Top 20",
    copied: "Copied!",
    err: "Something went wrong",
    partnerTitle: "Affiliate Program",
    copy: "Copy Link",
    chooseTeam: "Choose your team",
    battleShort: "$Battle",
    incomeShort: "Income",
    buy: "BUY", // ðŸ†• Added

    // âš™ï¸ Upgrades + Battery
    upgradesTitle: "Upgrades",
    batteryLevel: "Battery Level",
    batteryCap: "Capacity",
    batteryCost: "Cost",
    upgradeBattery: "Upgrade Battery",
    upgradeBatteryBtn: "Upgrade Battery",
    comingSoon: "âš™ï¸ Upgrade your power, energy and rewards!",

    // ðŸ’Ž VIP
    vipStatusLabel: "VIP Status",
    vipCost: "Cost",
    buyVip: "Buy VIP",
    vipActive: "Active",
    vipInactive: "Inactive",
    vipTimeLeft: "Time Left",

    // â— VIP info popup
    vipInfoText:
      "ðŸ”¥ VIP Benefits:\n\nâ€¢ +25% Tap Power\nâ€¢ Passive income Ã—5\nâ€¢ Battery Ã—3\nâ€¢ 25% Battle discount\nâ€¢ Duration: 7 days",

    // ðŸ§­ Bottom Navigation
    navHome: "Home",
    navMyTeam: "My Team",
    navUpgrades: "Upgrades",
    navLeaderboard: "Leaderboard",
    navReferrals: "Referrals"
  },

  he: {
    // ðŸ ×›×œ×œ×™
    israel: "×™×©×¨××œ",
    gaza: "×¢×–×”",
    tap: "×˜××¤ (+1)",
    superBoost: "×¡×•×¤×¨ ×‘×•×¡×˜ (+25)",
    switchTeam: "×”×—×œ×£ ×§×‘×•×¦×”",
    extraTap: "Extra Tap",
    myBoard: "×”×œ×•×— ×©×œ×™",
    stars: "×›×•×›×‘×™× / Extra Tap",
    playerLevel: "×¨×ž×ª ×©×—×§×Ÿ",
    referrals: "×ž×•×–×ž× ×™×",
    tapsToday: "×˜××¤×™× ×”×™×•×",
    top20: "×˜×•×¤ 20",
    copied: "×”×•×¢×ª×§!",
    err: "××™×¨×¢×” ×©×’×™××”",
    partnerTitle: "×ª×•×›× ×™×ª ×©×•×ª×¤×™×",
    copy: "×”×¢×ª×§ ×§×™×©×•×¨",
    chooseTeam: "×‘×—×¨ ××ª ×”×§×‘×•×¦×” ×©×œ×š",
    battleShort: "$Battle",
    incomeShort: "×”×›× ×¡×”",
    buy: "×§× ×”", // ðŸ†• Added

    // âš™ï¸ ×©×“×¨×•×’×™× + ×‘×˜×¨×™×™×”
    upgradesTitle: "×©×“×¨×•×’×™×",
    batteryLevel: "×¨×ž×ª ×‘×˜×¨×™×™×”",
    batteryCap: "×§×™×‘×•×œ×ª",
    batteryCost: "×¢×œ×•×ª",
    upgradeBattery: "×©×“×¨×’ ×‘×˜×¨×™×™×”",
    upgradeBatteryBtn: "×©×“×¨×•×’ ×‘×˜×¨×™×™×”",
    comingSoon: "âš™ï¸ ×©×“×¨×’ ××ª ×”×¢×•×¦×ž×”, ×”×× ×¨×’×™×” ×•×”×¤×¨×¡×™× ×©×œ×š!",

    // ðŸ’Ž VIP
    vipStatusLabel: "×ž×¦×‘ VIP",
    vipCost: "×¢×œ×•×ª",
    buyVip: "×§× ×” VIP",
    vipActive: "×¤×¢×™×œ",
    vipInactive: "×œ× ×¤×¢×™×œ",
    vipTimeLeft: "×–×ž×Ÿ ×©× ×•×ª×¨",

    // â— VIP info popup
    vipInfoText:
      "ðŸ”¥ ×™×ª×¨×•× ×•×ª VIP:\n\nâ€¢ â€Ž+25% ×›×•×— ×œ×˜××¤\nâ€¢ ×”×›× ×¡×” ×¤×¡×™×‘×™×ª Ã—5\nâ€¢ ×‘×˜×¨×™×™×” Ã—3\nâ€¢ â€Ž25% ×”× ×—×” ×‘×©×“×¨×•×’×™×\nâ€¢ ×ª×•×§×£: 7 ×™×ž×™×",

    // ðŸ§­ ×¡×¨×’×œ ×ª×—×ª×•×Ÿ
    navHome: "×‘×™×ª",
    navMyTeam: "×”×§×‘×•×¦×” ×©×œ×™",
    navUpgrades: "×©×“×¨×•×’×™×",
    navLeaderboard: "×œ×•×— ×ž×•×‘×™×œ×™×",
    navReferrals: "×©×•×ª×¤×™×"
  },

  ar: {
    // ðŸ Ø¹Ø§Ù…
    israel: "Ø¥Ø³Ø±Ø§Ø¦ÙŠÙ„",
    gaza: "ØºØ²Ø©",
    tap: "Ø§Ù†Ù‚Ø± (+1)",
    superBoost: "Ø¯ÙØ¹Ø© Ù‚ÙˆÙŠØ© (+25)",
    switchTeam: "Ø¨Ø¯Ù‘Ù„ Ø§Ù„ÙØ±ÙŠÙ‚",
    extraTap: "Extra Tap",
    myBoard: "Ù„ÙˆØ­ØªÙŠ",
    stars: "Ù†Ø¬ÙˆÙ… / Extra Tap",
    playerLevel: "Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù„Ø§Ø¹Ø¨",
    referrals: "Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙˆÙ†",
    tapsToday: "Ù†Ù‚Ø±Ø§Øª Ø§Ù„ÙŠÙˆÙ…",
    top20: "Ø£ÙØ¶Ù„ 20",
    copied: "ØªÙ… Ø§Ù„Ù†Ø³Ø®!",
    err: "Ø­Ø¯Ø« Ø®Ø·Ø£ Ù…Ø§",
    partnerTitle: "Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ø¥Ø­Ø§Ù„Ø©",
    copy: "Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·",
    chooseTeam: "Ø§Ø®ØªØ± ÙØ±ÙŠÙ‚Ùƒ",
    battleShort: "$Battle",
    incomeShort: "Ø§Ù„Ø¯Ø®Ù„",
    buy: "Ø´Ø±Ø§Ø¡", // ðŸ†• Added

    // âš™ï¸ Ø§Ù„ØªØ±Ù‚ÙŠØ§Øª + Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©
    upgradesTitle: "Ø§Ù„ØªØ±Ù‚ÙŠØ§Øª",
    batteryLevel: "Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©",
    batteryCap: "Ø§Ù„Ø³Ø¹Ø©",
    batteryCost: "Ø§Ù„ØªÙƒÙ„ÙØ©",
    upgradeBattery: "ØªØ±Ù‚ÙŠØ© Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©",
    upgradeBatteryBtn: "ØªØ±Ù‚ÙŠØ© Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©",
    comingSoon: "âš™ï¸ Ù‚Ù… Ø¨ØªØ±Ù‚ÙŠØ© Ù‚ÙˆØªÙƒ ÙˆØ·Ø§Ù‚ØªÙƒ ÙˆÙ…ÙƒØ§ÙØ¢ØªÙƒ!",

    // ðŸ’Ž VIP
    vipStatusLabel: "Ø­Ø§Ù„Ø© VIP",
    vipCost: "Ø§Ù„ØªÙƒÙ„ÙØ©",
    buyVip: "Ø´Ø±Ø§Ø¡ VIP",
    vipActive: "Ù†Ø´Ø·",
    vipInactive: "ØºÙŠØ± Ù†Ø´Ø·",
    vipTimeLeft: "Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ",

    // â— VIP info popup
    vipInfoText:
      "ðŸ”¥ Ù…Ø²Ø§ÙŠØ§ VIP:\n\nâ€¢ â€Ž+25% Ù‚ÙˆØ© Ø§Ù„Ù†Ù‚Ø±Ø©\nâ€¢ Ø¯Ø®Ù„ Ø³Ù„Ø¨ÙŠ Ã—5\nâ€¢ Ø¨Ø·Ø§Ø±ÙŠØ© Ã—3\nâ€¢ Ø®ØµÙ… 25%\nâ€¢ Ù…Ø¯Ø©: 7 Ø£ÙŠØ§Ù…",

    // ðŸ§­ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ
    navHome: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
    navMyTeam: "ÙØ±ÙŠÙ‚ÙŠ",
    navUpgrades: "Ø§Ù„ØªØ±Ù‚ÙŠØ§Øª",
    navLeaderboard: "Ø§Ù„Ù…ØªØµØ¯Ø±ÙˆÙ†",
    navReferrals: "Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª"
  }
};

function getLang() {
  return document.documentElement.getAttribute("data-lang") || "he";
}

// â¬…ï¸ ×©×•×¨×” ×—×“×©×” â€“ ×ž×—×‘×¨ ××ª ×”×¤×•× ×§×¦×™×” ×œ-window
window.getLang = getLang;

function setLang(l) {
  document.documentElement.setAttribute("data-lang", l);
  localStorage.setItem("tb_lang", l);

  document.querySelectorAll("[data-i18n]").forEach(el => {
    const k = el.getAttribute("data-i18n");
    el.textContent = i18n[l]?.[k] || k;
  });

  // ðŸª– TB_V19 â€” ×¨×¢× ×•×Ÿ MyTeam ×‘×¢×ª ×©×™× ×•×™ ×©×¤×”
  const active = document.querySelector(".bottom-nav .active")?.dataset?.panel;
  if (active === "myteam") {
    loadMyTeamCategories(l);
    loadMyTeamItems(null, l);
  }
}


const langBtns = document.querySelectorAll(".lang-switch [data-lang]");
if (langBtns && langBtns.length) {
  langBtns.forEach(btn =>
    btn.addEventListener("click", () => setLang(btn.dataset.lang))
  );
}


(function () {
  const s = localStorage.getItem("tb_lang");
  if (s) {
    setLang(s);
  } else {
    const t = (navigator.language || "he").slice(0, 2);
    setLang(["he", "en", "ar"].includes(t) ? t : "he");
  }
})();
