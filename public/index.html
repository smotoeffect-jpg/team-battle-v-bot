<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TeamBattle â€¢ Israel Vs Gaza</title>
  <link rel="stylesheet" href="style.css"/>
  <script>
    // Telegram WebApp shim (prevents errors in desktop/browser testing)
    window.Telegram = window.Telegram || {};
    Telegram.WebApp = Telegram.WebApp || {
      initDataUnsafe: { user: { id: 0, username: "Guest", first_name: "Guest"} },
      ready: ()=>{},
      expand: ()=>{},
      openInvoice: (url)=>{ try{ window.open(url, "_blank"); }catch(e){ location.href=url; } },
      HapticFeedback: { impactOccurred: ()=>{}, notificationOccurred: ()=>{} },
      CloudStorage: { getItem: (k,cb)=>cb(null,null), setItem: (k,v,cb)=>cb&&cb() }
    };
  </script>
</head>
<body>
  <div id="app" class="container">
    <!-- Double XP indicator -->
    <div id="double-xp" class="doublexp off">Double XP Off</div>

    <!-- Title -->
    <header class="title-wrap">
      <h1 class="title glow">TeamBattle</h1>
      <h2 class="subtitle glow">Israel Vs Gaza</h2>
    </header>

    <!-- Language + Partner Program -->
    <section class="toolbar">
      <div class="lang-switch">
        <button class="chip" data-lang="en">EN</button>
        <button class="chip" data-lang="he">HE</button>
        <button class="chip" data-lang="ar">AR</button>
      </div>
      <div class="partner-row">
          <input id="ref-link" class="partner-input" readonly />
          <button id="copy-ref" class="btn small"></button>
        </div>
      </div>
    </section>

    <!-- Buttons rows -->
    <section class="actions">
      <div class="row">
        <button id="tap-btn" class="btn primary"></button>
        <button id="super-btn" class="btn warn"></button>
        <button id="switch-btn" class="btn ghost"></button>
      </div>
      <div class="row">
        <div class="extra-group">
          <input id="extra-amount" type="number" min="1" max="1000" value="10" />
          <button id="extra-btn" class="btn gold"></button>
        </div>
      </div>
    
    <!-- Referral (moved under Extra Tap per user approval) -->
    <div id="partner" class="partner-box">
        <div class="partner-title"></div>
        

    </section>

    <!-- Scores -->
    <section class="scores">
      <div class="score-card israel">
        <div class="score-title" data-i18n="israel">Israel</div>
        <div id="score-israel" class="score-value">0</div>
      </div>
      <div class="score-card gaza">
        <div class="score-title" data-i18n="gaza">Gaza</div>
        <div id="score-gaza" class="score-value">0</div>
      </div>
    </section>

    <!-- Main split: My Panel + Top20 -->
    <section class="split">
      <div class="panel">
        <h3 class="section-title" data-i18n="myPanel">My Panel</h3>
        <div class="kv"><span data-i18n="starsExtra">Stars | Extra Tap</span> <span id="stars-extra">0</span></div>
        <div class="kv"><span data-i18n="playerLevel">Player Level</span> <span id="player-level">1</span></div>
        <div class="kv"><span data-i18n="invited">Invited</span> <span id="invited-count">0</span></div>
        <div class="kv"><span data-i18n="tapsToday">Taps Today</span> <span id="taps-today">0/300</span></div>
      </div>
      <div class="toplist">
        <h3 class="section-title" data-i18n="top20">Top 20</h3>
        <ol id="top-list"></ol>
      </div>
    </section>

    <!-- Messages -->
    <section class="messages">
      <h3 class="section-title" data-i18n="battleMessages">Battle Messages</h3>
      <div id="feed" class="feed"></div>
    </section>
  </div>

  <script src="script.js"></script>
</body>
</html>
