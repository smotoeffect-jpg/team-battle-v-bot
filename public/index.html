<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TeamBattle â€¢ Israel Vs Gaza</title>
  <link rel="stylesheet" href="./style.css" />
  <script>
    (function(){ 
      const l = localStorage.getItem('tb_lang'); 
      if(l) document.documentElement.setAttribute('data-lang', l); 
    })();
  </script>
</head>
<body>
  <div id="app" class="wrap">
    <div id="double-xp" class="doublexp-line" aria-live="polite"></div>
   
    <header class="title">
      <div class="brand">TeamBattle</div>
      <div class="subtitle">Israel Vs Gaza</div>
    </header>

    <div class="toolbar">
      <div class="lang-switch">
        <button class="btn btn-small" data-lang="he">×¢×‘×¨×™×ª</button>
        <button class="btn btn-small" data-lang="en">English</button>
        <button class="btn btn-small" data-lang="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
      </div>
    </div>

    <!-- âœ… TB_V15: Live Battle/Income strip -->
    <div id="battle-stats" class="battle-stats">
      <span id="battleShort" data-i18n="battleShort">$Battle</span>:
      <span id="incomeShort">âš¡ 0.00/sec</span>
    </div>
    
    <!-- === Team Selection Area === -->
    <div class="team-hint" data-i18n="chooseTeam">×‘×—×¨ ××ª ×”×§×‘×•×¦×” ×©×œ×š</div>
    <section class="scores-row">
      <div class="score-card team-card" id="flag-israel">
        <div class="score-label" data-i18n="israel">ğŸ‡®ğŸ‡± ×™×©×¨××œ</div>
        <div class="score-value" id="score-israel-value">0</div>
      </div>

      <div class="score-card team-card" id="flag-gaza">
        <div class="score-label" data-i18n="gaza">ğŸ‡µğŸ‡¸ ×¢×–×”</div>
        <div class="score-value" id="score-gaza-value">0</div>
      </div>
    </section>

    <!-- === Main Action Buttons === -->
    <div class="action-row">
      <button id="btn-tap" data-i18n="tap">Tap (+1)</button>
      <button id="btn-super" style="display:none" data-i18n="superBoost">Super Boost (+25)</button>
      <button id="btn-switch" style="display:none" data-i18n="switchTeam">Switch Team</button>
    </div>

    <!-- === Extra Tap Section === -->
    <div class="extra-row">
      <input id="stars-input" type="number" min="1" max="1000" value="10">
      <button id="btn-extra" data-i18n="extraTap">Extra Tap</button>
    </div>

    <!-- Referral Program -->
    <div id="partner" class="partner-box">
      <div class="partner-title" data-i18n="partnerTitle">×ª×•×›× ×™×ª ×©×•×ª×¤×™×</div>
      <div class="partner-row">
        <input id="refLink" class="partner-input" readonly />
        <button id="copyRef" class="btn small" data-i18n="copy">×”×¢×ª×§ ×§×™×©×•×¨</button>
        <button id="shareRef" class="btn small share" aria-label="Share on Telegram"></button>
      </div>
    </div>

    <!-- === Main Grid === -->
    <main class="main-grid">
      <!-- ğŸ  My Board -->
      <section class="panel" id="my-board">
        <div class="panel-title" data-i18n="myBoard">×”×œ×•×— ×©×œ×™</div>
        <div class="kv">
          <div class="k" data-i18n="stars">Stars / Extra Tap</div>
          <div class="v" id="me-stars"></div>

          <div class="k">$BATTLE</div>
          <div class="v" id="me-battle">0</div>

          <div class="k">XP</div>
          <div class="v" id="me-xp">0</div>

          <div class="k" data-i18n="playerLevel">Player Level</div>
          <div class="v" id="me-level"></div>

          <div class="k" data-i18n="referrals">Invited Friends</div>
          <div class="v" id="me-referrals">â€“</div>

          <div class="k" data-i18n="tapsToday">Taps today</div>
          <div class="v" id="me-taps">0/300</div>
        </div>

        <!-- âœ… Ton Wallet Connect -->
        <div class="ton-wallet">
          <button id="connect-ton" class="btn btn-pink">ğŸ’ Connect TON Wallet</button>
          <div id="ton-address" class="wallet-address"></div>
        </div>
      </section>

      <!-- âš™ï¸ Upgrades Panel -->
      <section class="panel hidden" id="upgradesPanel">
        <div class="panel-title" data-i18n="upgradesTitle">âš™ï¸ Upgrades</div>

        <div class="upgrade-card">
          <div class="upgrade-info">
            <div>ğŸ”‹ <span data-i18n="batteryLevel">Battery Level</span>: <span id="batteryLevel">1</span></div>
            <div>âš¡ <span data-i18n="batteryCap">Capacity</span>: <span id="batteryCap">300</span></div>
            <div>ğŸ’° <span data-i18n="batteryCost">Cost</span>: <span id="batteryCost">100</span> $Battle</div>
          </div>
          <button id="btn-upgrade-battery" class="btn btn-gold" data-i18n="upgradeBattery">Upgrade Battery</button>
          <div id="batteryMsg" class="upgrade-msg"></div>
        </div>
      </section>

      <!-- ğŸ† Top 20 -->
      <section class="panel" id="top20">
        <div class="panel-title">Top 20</div>
        <ol id="top20-list" class="top-list" aria-live="polite"></ol>
      </section>
    </main>

    <footer class="foot">
      <span id="status-line"></span>
    </footer>
  </div>

  <!-- === TB_V15 â€” Bottom Navigation Bar (Multilingual) === -->
  <nav class="bottom-nav">
    <div class="nav-scroll">
      <button class="nav-btn active" id="btn-home" data-i18n="navHome">ğŸ  Home</button>
      <button class="nav-btn" id="btn-myteam" data-i18n="navMyTeam">ğŸª– My Team</button>
      <button class="nav-btn" id="btn-upgrades" data-i18n="navUpgrades">âš™ï¸ Upgrades</button>
      <button class="nav-btn" id="btn-leaderboard" data-i18n="navLeaderboard">ğŸ† Leaderboard</button>
      <button class="nav-btn" id="btn-referrals" data-i18n="navReferrals">ğŸ”— Invited Friends</button>
    </div>
  </nav>

  <!-- === SDKs and Scripts === -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://unpkg.com/@tonconnect/sdk@latest/dist/tonconnect-sdk.min.js"></script>
  <script src="./script.js"></script>
</body>
</html>
